<!DOCTYPE html>
<html lang="en">
    <!-- Mirrored from smartshop.websitelayout.net/admin/coupons.html by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 03 Jan 2023 16:01:00 GMT -->
    <head>
        <!-- metas -->
        <meta charset="utf-8" />
        <meta name="author" content="Chitrakoot Web" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
        <meta name="keywords" content="admin,dashboard" />
        <meta name="description" content="Smartshop - Responsive eCommerce Admin Dashboard" />

        <!-- title  -->
        <title>Smartshop - Responsive eCommerce Admin Dashboard</title>

        <!-- favicon -->
        <link rel="shortcut icon" href="/images/admin/logos/favicon-16x16.png" />
        <link rel="apple-touch-icon" href="/images/admin/logos/apple-touch-icon-57x57.png" />
        <link rel="apple-touch-icon" sizes="72x72" href="/images/admin/logos/apple-touch-icon-72x72.png" />
        <link rel="apple-touch-icon" sizes="114x114" href="/images/admin/logos/apple-touch-icon-114x114.png" />
        <script src="https://kit.fontawesome.com/624938e563.js" crossorigin="anonymous"></script>
        <!-- common plugins -->
        <link rel="stylesheet" href="/plugins/admin/bootstrap/css/bootstrap.min.css" />
        <link rel="stylesheet" href="/plugins/admin/font-awesome/css/font-awesome.min.css" />
        <link rel="stylesheet" href="/plugins/admin/icomoon/style.css" />
        <link rel="stylesheet" href="/plugins/admin/uniform/css/default.css" />
        <link rel="stylesheet" href="/plugins/admin/switchery/switchery.min.css" />

        <!-- theme core css -->
        <link rel="stylesheet" href="/stylesheet/admin/style.css" />
    </head>

    <body>
        <!-- PAGE LOADING
    ================================================== -->
        <div id="preloader"></div>

        <!-- PAGE CONTAINER
    ================================================== -->
        <div class="page-container">
            <%- include("../includes/admin-sidebar.ejs") %>
            <div class="page-content">
                <!-- PAGE HEADER
            ================================================== -->
                <%- include("../includes/admin_header.ejs") %>

                <!-- PAGE INNER
            ================================================== -->
                <div class="page-inner">
                    <!-- PAGE MAIN WRAPPER
                ================================================== -->
                    <div id="main-wrapper">
                        <!-- row -->
                        <div class="row align-items-center grid-margin">
                            <div class="col-12">
                                <div class="card card-white">
                                    <div class="card-body row align-items-center">
                                        <div class="col-12 col-md-4">
                                            <h4 class="mb-4 mb-md-0">Coupons</h4>
                                        </div>

                                        <div class="col-12 col-md-8">
                                            <div class="row">
                                                <div class="col-md-3 mb-3 mb-md-0">
                                                    <select class="form-control form-select">
                                                        <option>Status</option>
                                                        <option>Active</option>
                                                        <option>revoked</option>
                                                    </select>
                                                </div>

                                                <div class="col-md-3 mb-3 mb-md-0">
                                                    <select class="form-control form-select">
                                                        <option>Order Limits</option>
                                                        <option>Last 7 Orders</option>
                                                        <option>Last 15 Orders</option>
                                                        <option>Last 30 Orders</option>
                                                    </select>
                                                </div>

                                                <div class="col-md-6">
                                                    <input
                                                        type="text"
                                                        class="form-control"
                                                        id="exampleInputEmail1"
                                                        aria-describedby="exampleInputEmail1"
                                                        placeholder="search by name"
                                                    />
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- end row -->

                        <!-- row -->
                        <div class="row">
                            <div class="col-12 grid-margin">
                                <div class="card card-white">
                                    <div class="card-body">
                                        <div class="table-responsive">
                                            <table class="table table-order">
                                                <thead>
                                                    <tr>
                                                        <th scope="col">ID</th>
                                                        <th scope="col">Campaigns Name</th>
                                                        <th scope="col">Code</th>
                                                        <th scope="col">Remaining coupon</th>
                                                        <th scope="col">Expiration Date</th>
                                                        <th scope="col">Creation Date</th>
                                                        <th scope="col">Status</th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <% for( let i = 0; i < cooopon.length; i++ ) { %>
                                                    <tr>
                                                        <td><%=i+1%></td>
                                                        <td><%=cooopon[i].couponName%></td>
                                                        <td><%=cooopon[i].couponCode%></td>
                                                        <td>
                                                            <div class="custom-progress bg-blue progress mb-2">
                                                                <div
                                                                    class="animated custom-bar progress-bar slideInLeft"
                                                                    style="width: <%=(cooopon[i].quantity / 30) * 100%>%"
                                                                    aria-valuemax="100"
                                                                    aria-valuemin="0"
                                                                    aria-valuenow="10"
                                                                    role="progressbar"
                                                                ></div>
                                                            </div>
                                                            <div class="progress-text">
                                                                <div><%=cooopon[i].quantity%> of 30 coupon remaining</div>
                                                            </div>
                                                        </td>
                                                        <td><%=cooopon[i].startDate.toLocaleDateString()%></td>
                                                        <td><%=cooopon[i].endDate.toLocaleDateString()%></td>
                                                        <%if(cooopon[i].status==true){%>
                                                        <td>
                                                            <a onclick="active('<%=cooopon[i]._id%>')"
                                                                ><i class="fas fa-circle text-success me-2 f-s-10"></i
                                                                >Active</a
                                                            >
                                                        </td>
                                                        <% } else { %>
                                                        <td>
                                                            <a onclick="revoke('<%=cooopon[i]._id%>')"
                                                                ><i class="fas fa-circle text-danger me-2 f-s-10"></i
                                                                >Revoked</a
                                                            >
                                                        </td>
                                                        <%}%>
                                                    </tr>
                                                    <% } %>
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- end row -->
                    </div>
                    <div class="page-footer">
                        <p>Copyright &copy; <span class="current-year"></span> Gigant Elektra All rights reserved.</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- SCROLL TO TOP
    ================================================== -->
        <a href="#" class="scroll-to-top"><i class="fas fa-angle-up" aria-hidden="true"></i></a>

        <!-- ALL JS INCLUDE
    ================================================== -->
        <!-- axios cdn -->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/1.2.3/axios.min.js"></script>

        <!-- sweet alert cdn -->
        <script src="//cdn.jsdelivr.net/npm/sweetalert2@11"></script>

        <script>
            const Toast = Swal.mixin({
                toast: true,
                position: "top-end",
                showConfirmButton: false,
                timer: 1000,
                timerProgressBar: true,
                didOpen: (toast) => {
                    toast.addEventListener("mouseenter", Swal.stopTimer);
                    toast.addEventListener("mouseleave", Swal.resumeTimer);
                },
            });
            async function active(id) {
                event.preventDefault();
                await axios.post("/admin/active_coupon/" + id).then(() => {
                    // if (response.data.statu)
                    Toast.fire({
                        icon: "success",
                        title: "Coupen status updated successfully",
                    });
                    location.reload();
                });
            }
            async function revoke(id) {
                event.preventDefault();
                await axios.post("/admin/revoke_coupon/" + id).then(() => {
                    // if (response.data.satu == false)
                    Toast.fire({
                        icon: "success",
                        title: "Coupon status updated successfully",
                    });
                    location.reload();
                });
            }
        </script>

        <!-- jQuery -->
        <script src="/plugins/admin/jquery/jquery.min.js"></script>

        <!-- popper -->
        <script src="/plugins/admin/popper/js/popper.min.js"></script>

        <!-- bootstrap -->
        <script src="/plugins/admin/bootstrap/js/bootstrap.min.js"></script>

        <!-- slimscroll -->
        <script src="/plugins/admin/jquery-slimscroll/jquery.slimscroll.min.js"></script>

        <!-- uniform -->
        <script src="/plugins/admin/uniform/js/jquery.uniform.standalone.js"></script>

        <!-- switchery -->
        <script src="/plugins/admin/switchery/switchery.min.js"></script>

        <!-- theme core scripts -->
        <script src="/js/admin/main.js"></script>

        <!-- all js include end -->
    </body>

    <!-- Mirrored from smartshop.websitelayout.net/admin/coupons.html by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 03 Jan 2023 16:01:00 GMT -->
</html>
