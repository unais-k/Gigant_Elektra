<!DOCTYPE html>
<html lang="en">
    <!-- Mirrored from smartshop.websitelayout.net/admin/order-details.html by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 03 Jan 2023 16:01:00 GMT -->
    <head>
        <!-- metas -->
        <meta charset="utf-8" />
        <meta name="author" content="Chitrakoot Web" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
        <meta name="keywords" content="admin,dashboard" />
        <meta name="description" content="Smartshop - Responsive eCommerce Admin Dashboard" />

        <!-- title  -->
        <title>Smartshop - Responsive eCommerce Admin Dashboard</title>

        <!-- favicon -->
        <link rel="shortcut icon" href="/images/admin/logos/favicon.png" />
        <link rel="apple-touch-icon" href="/images/admin/logos/apple-touch-icon-57x57.png" />
        <link rel="apple-touch-icon" sizes="72x72" href="/images/admin/logos/apple-touch-icon-72x72.png" />
        <link rel="apple-touch-icon" sizes="114x114" href="/images/admin/logos/apple-touch-icon-114x114.png" />
        <script src="https://kit.fontawesome.com/624938e563.js" crossorigin="anonymous"></script>
        <!-- common plugins -->
        <link rel="stylesheet" href="/plugins/admin/bootstrap/css/bootstrap.min.css" />
        <link rel="stylesheet" href="/plugins/admin/font-awesome/css/font-awesome.min.css" />
        <link rel="stylesheet" href="/plugins/admin/icomoon/style.css" />
        <link rel="stylesheet" href="/plugins/admin/uniform/css/default.css" />
        <link rel="stylesheet" href="/plugins/admin/switchery/switchery.min.css" />

        <!-- datepicker css -->
        <link rel="stylesheet" href="/plugins/admin/bootstrap-datepicker/css/datepicker.css" />

        <!-- theme core css -->
        <link rel="stylesheet" href="/stylesheet/admin/style.css" />
    </head>

    <body>
        <!-- PAGE LOADING
    ================================================== -->
        <div id="preloader"></div>

        <!-- PAGE CONTAINER
    ================================================== -->
        <div class="page-container">
            <!-- PAGE SIDEBAR
        ================================================== -->
            <%- include("../includes/admin-sidebar.ejs") %>
            <!-- PAGE CONTENT
        ================================================== -->
            <div class="page-content">
                <!-- PAGE HEADER
            ================================================== -->
                <%- include("../includes/admin_header.ejs") %>

                <!-- PAGE INNER
            ================================================== -->
                <div class="page-inner">
                    <!-- PAGE MAIN WRAPPER
                ================================================== -->
                    <div id="main-wrapper">
                        <!-- row -->
                        <div class="row g-xl-3">
                            <div class="col-xl-4 grid-margin">
                                <div class="card card-white h-100">
                                    <div class="card-heading clearfix">
                                        <h4 class="card-title">General</h4>
                                    </div>
                                    <div class="card-body">
                                        <% if (details.order_status=="Completed") { %>
                                        <div class="row">
                                            <div class="col-md-12 mb-2">
                                                <div class="form-group">
                                                    <label for="validationCustom01">Status</label>
                                                    <div>
                                                        <input type="text" class="form-control" value="Completed" />
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-12 mb-2">
                                                <div class="form-group">
                                                    <label>Date Created</label>
                                                    <div>
                                                        <input
                                                            type="text"
                                                            class="form-control"
                                                            value="<%=details.createdAt.toLocaleString()%>"
                                                        />
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-12">
                                                <div class="form-group">
                                                    <label>Date Updated</label>
                                                    <div>
                                                        <input
                                                            type="text"
                                                            class="form-control"
                                                            value="<%=details.updatedAt.toLocaleString()%>"
                                                        />
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <% } else if (details.order_status=="Cancelled") { %>
                                        <div class="row">
                                            <div class="col-md-12 mb-2">
                                                <div class="form-group">
                                                    <label for="validationCustom01">Status</label>
                                                    <div>
                                                        <input type="text" class="form-control" value="Cancelled" />
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-12 mb-2">
                                                <div class="form-group">
                                                    <label>Date Created</label>
                                                    <div>
                                                        <input
                                                            type="text"
                                                            class="form-control"
                                                            value="<%=details.createdAt.toLocaleString()%>"
                                                        />
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="col-md-12">
                                                <div class="form-group">
                                                    <label>Date Updated</label>
                                                    <div>
                                                        <input
                                                            type="text"
                                                            class="form-control"
                                                            value="<%=details.updatedAt.toLocaleString()%>"
                                                        />
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <% } else { %>
                                        <form id="paymentStatus" method="post">
                                            <div class="row">
                                                <div class="col-md-12 mb-2">
                                                    <div class="form-group">
                                                        <label for="validationCustom01">Status</label>
                                                        <select
                                                            class="form-select form-control"
                                                            id="validationCustom01"
                                                            name="status"
                                                            aria-label="Default select example"
                                                        >
                                                            <option value="Pending Order">Pending Order</option>
                                                            <option value="Completed">Completed</option>
                                                            <option value="Cancelled">Cancelled</option>
                                                        </select>
                                                    </div>
                                                    <div class="col-md-12 mb-2">
                                                        <div class="form-group">
                                                            <label>Date Created</label>
                                                            <div>
                                                                <input
                                                                    type="text"
                                                                    class="form-control"
                                                                    value="<%=details.createdAt.toLocaleString()%>"
                                                                />
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-md-6 mb-2">
                                                    <button id="fomrbtn" class="btn btn-primary" type="submit">
                                                        Submit
                                                    </button>
                                                </div>
                                            </div>
                                        </form>
                                        <% } %>
                                    </div>
                                </div>
                            </div>
                            <div class="col-xl-8 grid-margin">
                                <div class="card card-white h-100">
                                    <div class="card-heading clearfix">
                                        <h4 class="card-title">Addresses</h4>
                                    </div>
                                    <div class="card-body">
                                        <div class="row">
                                            <div class="col-lg-auto me-xl-5 pe-xl-5 mb-4 mb-xl-0">
                                                <h6 class="text-uppercase fw-bold mb-3">billing</h6>
                                                <ul class="list-unstyled ps-0">
                                                    <li>Street Name Example</li>
                                                    <li>2233</li>
                                                    <li>Detroit</li>
                                                    <li>Michigan</li>
                                                    <li>56218</li>
                                                    <li>UK</li>
                                                </ul>
                                                <strong class="d-block">Email address:</strong>
                                                <a href="#">name@domain.com</a>
                                                <strong class="d-block mt-3">Phone:</strong>
                                                <a href="#">1234-5678</a>
                                            </div>
                                            <div class="col-lg-auto ps-xl-5">
                                                <h6 class="fw-bold text-uppercase mb-3">shipping</h6>
                                                <ul class="list-unstyled ps-0">
                                                    <li><%=finalAddress.name%></li>
                                                    <li><%=finalAddress.lastname%></li>
                                                    <li><%=finalAddress.address%></li>
                                                    <li><%=finalAddress.city%></li>
                                                    <li><%=finalAddress.pincode%></li>
                                                    <li><%=finalAddress.country%></li>
                                                </ul>
                                                <strong class="d-block">Email address:</strong>
                                                <a href="#"><%=finalAddress.email%></a>
                                                <strong class="d-block mt-3">Phone:</strong>
                                                <a href="#"><%=finalAddress.phone%></a>
                                            </div>
                                            <div class="col-lg-auto ps-xl-5 ms-5">
                                                <h6 class="text-uppercase fw-bold mb-3">User</h6>
                                                <ul class="list-unstyled ps-0">
                                                    <strong class="d-block">User name:</strong>
                                                    <li><%=details.user.userName%></li>
                                                </ul>
                                                <strong class="d-block">Email address:</strong>
                                                <a href="#"><%=details.user.userEmail%></a>
                                                <strong class="d-block mt-3">Phone:</strong>
                                                <a href="#"><%=details.user.phone%></a>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- end row -->

                        <!-- row -->
                        <div class="row g-xl-3">
                            <div class="col-lg-12 grid-margin">
                                <div class="card card-white h-100">
                                    <div class="card-heading clearfix">
                                        <h4 class="card-title">Products</h4>
                                    </div>
                                    <div class="card-body">
                                        <div class="table-responsive">
                                            <table class="table mb-0 order-details-table">
                                                <thead class="bg-light">
                                                    <tr>
                                                        <th class="text-center ps-4 id">ID</th>
                                                        <th class="text-center">Image</th>
                                                        <th class="text-center name">Name</th>
                                                        <th class="text-end cost">Cost</th>
                                                        <th class="text-end qty">Qty</th>
                                                        <th class="text-end total">Total</th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <% for( let i = 0; i < details.items.length; i++ ) { %>
                                                    <tr>
                                                        <td class="text-center ps-4"><strong><%=details.items[i].productId._id.toString().substr(15)%><strong></td>
                                                        <td class="text-center"><img src="<%=details.items[i].productId.productImages[0]%>" alt=""></td>
                                                        <td class="text-center"><a href="/admin/detail_product/<%=details.items[i].productId._id%>"><%=details.items[i].productId.productName%></a></td>
                                                        <td class="text-end">$<%=details.items[i].productId.price%>.00</td>
                                                        <td class="text-center"><%=details.items[i].quantity%></td>
                                                        <td class="text-end">$<%=details.items[i].totalPrice%>.00</td>
                                                    </tr>
                                                    <% } %>
                                                    <!-- <tr>
                                                        <td class="ps-4">
                                                            <a href="#"><strong>290398</strong></a>
                                                        </td>
                                                        <td><a href="#">Sun Protection Cap</a></td>
                                                        <td class="text-end">$10.20</td>
                                                        <td class="text-end">1</td>
                                                        <td class="text-end">$10.20</td>
                                                    </tr>
                                                    <tr>
                                                        <td class="ps-4">
                                                            <a href="#"><strong>290399</strong></a>
                                                        </td>
                                                        <td><a href="#">Heel Character Shoes</a></td>
                                                        <td class="text-end">$19.50</td>
                                                        <td class="text-end">1</td>
                                                        <td class="text-end">$19.50</td>
                                                    </tr> -->
                                                </tbody>
                                            </table>
                                        </div>
                                        <div class="row justify-content-end flex-column flex-lg-row mt-5">
                                            <div class="col-auto me-5">
                                                <h6 class="fw-bold mb-2">Items Subtotal</h6>
                                                <span class="d-flex align-items-center">
                                                    <%=details.items.length%> Items
                                                    <i class="fas fa-chevron-right f-s-11 text-primary px-3"></i>
                                                    <b>$<%=details.cartTotal%>.00</b>
                                                </span>
                                            </div>
                                            <div class="col-auto me-5">
                                                <h6 class="fw-bold mb-2">Shipping</h6>
                                                <span class="d-flex align-items-center">
                                                    Flat Rate
                                                    <i class="fas fa-chevron-right f-s-11 text-primary px-3"></i>
                                                    <b>$<%=details.delivery%>.00</b>
                                                </span>
                                            </div>
                                            <div class="col-auto">
                                                <h6 class="fw-bold mb-2">Order Total</h6>
                                                <span class="d-flex align-items-center justify-content-lg-end">
                                                    <strong>$<%=details.total%>.00</strong>
                                                </span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="page-footer">
                        <p>Copyright &copy; <span class="current-year"></span> Gigant Elektra All rights reserved.</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- SCROLL TO TOP
    ================================================== -->
        <a href="#" class="scroll-to-top"><i class="fas fa-angle-up" aria-hidden="true"></i></a>

        <!-- ALL JS INCLUDE
    ================================================== -->

        <!-- axios cdn -->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/1.2.3/axios.min.js"></script>

        <!-- sweet alert cdn -->
        <script src="//cdn.jsdelivr.net/npm/sweetalert2@11"></script>

        <!-- ajaxxxxxxxxx -->
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.1/jquery.min.js"></script>

        <script>
            // const method = $('input[type="radio"][name="payment"]:checked').val();

            const form = document.getElementById("paymentStatus");
            form.addEventListener("submit", (e) => {
                e.preventDefault();
                const formData = new FormData(form);
                const formProps = Object.fromEntries(formData);
                console.log(formProps, "aaaa");
                if ({ status: "Cancelled" }) {
                    console.log(1111);
                    Swal.fire({
                        title: "Are you sure?",
                        text: "You won't be able to revert this!",
                        icon: "warning",
                        showCancelButton: true,
                        confirmButtonColor: "#3085d6",
                        cancelButtonColor: "#d33",
                        confirmButtonText: "Yes, do it!",
                    }).then(async (result) => {
                        console.log(2222);
                        if (result.isConfirmed) {
                            await axios.post("/admin/order_status_confirm?id=<%=details._id%>", formProps).then((res) => {
                                if (res.data.cancel) {
                                    Swal.fire("Cancel!", "This order has been canceld.", "success");
                                }
                                document.getElementById("fomrbtn").style.visibility = "hidden";
                                location.reload();
                            });
                        }
                    });
                } else if ({ status: "Completed" }) {
                    Swal.fire({
                        title: "Are you sure?",
                        text: "You won't be able to revert this!",
                        icon: "warning",
                        showCancelButton: true,
                        confirmButtonColor: "#3085d6",
                        cancelButtonColor: "#d33",
                        confirmButtonText: "Yes, Do it!",
                    }).then(async (result) => {
                        if (result.isConfirmed) {
                            await axios.post("/admin/order_status_confirm?id=<%=details._id%>", formProps).then((res) => {
                                if (res.data.complete) {
                                    Swal.fire("Completed!", "This order has been completed.", "success");
                                }
                                document.getElementById("fomrbtn").style.visibility = "hidden";
                                location.reload();
                            });
                        }
                    });
                } else {
                    axios
                        .post("/admin/order_status_confirm?id=<%=details._id%>", formProps)
                        .then((res) => {
                            console.log(4444);
                            if (res.data.status) {
                                Swal.fire({
                                    title: "Wake up!!",
                                    text: "What are you doing!",
                                    icon: "warning",
                                    showCancelButton: true,
                                    confirmButtonColor: "#3085d6",
                                    cancelButtonColor: "#d33",
                                    confirmButtonText: "Yes, Do it!",
                                });
                                // document.getElementById("fomrbtn").style.visibility = "hidden";
                            }
                        })
                        .catch((err) => {
                            console.log(err);
                        });
                }
            });
        </script>

        <!-- jQuery -->
        <script src="/plugins/admin/jquery/jquery.min.js"></script>

        <!-- popper -->
        <script src="/plugins/admin/popper/js/popper.min.js"></script>

        <!-- bootstrap -->
        <script src="/plugins/admin/bootstrap/js/bootstrap.min.js"></script>

        <!-- slimscroll -->
        <script src="/plugins/admin/jquery-slimscroll/jquery.slimscroll.min.js"></script>

        <!-- uniform -->
        <script src="/plugins/admin/uniform/js/jquery.uniform.standalone.js"></script>

        <!-- switchery -->
        <script src="/plugins/admin/switchery/switchery.min.js"></script>

        <!-- form elements -->
        <script src="/js/admin/pages/form-elements.js"></script>

        <!-- theme core scripts -->
        <script src="/js/admin/main.js"></script>

        <!-- all js include end -->
    </body>

    <!-- Mirrored from smartshop.websitelayout.net/admin/order-details.html by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 03 Jan 2023 16:01:00 GMT -->
</html>
